<!DOCTYPE html>
<html lang="ko">
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <!-- Font Awesome CSS -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>

    <title> 회원가입 페이지 (ツ)_/¯ </title>

    <style>
        @font-face {
            font-family: 'SLEIGothicTTF';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2104@1.0/SLEIGothicTTF.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }

        *{
            font-family: 'SLEIGothicTTF';
        }

        .field {
            margin: auto;
            display: block;
        }

        .title {
            font-weight: bold;
            font-size: 48px;
        }

        .box {
            margin: 20px auto;
            width: 500px;
        }

        .buttons button {
            font-family: 'SLEIGothicTTF';
        }

        /*body {*/
        /*    background-color: rgb(215, 246, 210);*/
        /*    min-height: 100vh;*/
        /*}*/

        /*.sub_log {*/
        /*    width: 350px;*/
        /*    margin: 30px auto;*/
        /*    text-align: center;*/
        /*    font-size: 32px;*/
        /*}*/

        /*.logo {*/
        /*    width: 350px;*/
        /*    height: 120px;*/
        /*    margin: 30px auto;*/
        /*    background-color: #D93600;*/
        /*    background-position: center;*/
        /*    text-align: center;*/

        /*}*/

        /*.main {*/
        /*    width: 330px;*/
        /*    margin: auto;*/
        /*}*/

    </style>
    <script>
        function is_id(asValue) {
            let regExp = /^(?=.*[a-zA-Z])[a-zA-Z0-9]{5,20}$/;
            return regExp.test(asValue);
        }

        // 5~20글자 영어와 숫자만 가능
        function is_nickname(asValue) {
            let regExp = /^(?=.*[a-zA-Z])[a-zA-Z0-9]{5,20}$/;
            return regExp.test(asValue);
        }


        function is_password(asValue) {
            let regExp = /^(?=.*\d)(?=.*[a-zA-Z])[0-9a-zA-Z!@#$%^&*]{8,16}$/;
            return regExp.test(asValue);
        }

        function check_duplicate() {
            let userid = $('#join_id').val()
            if (userid == "") {
                $('#check_id').text("아이디를 입력해 주세요.").removeClass("is-safe").addClass("is-danger")
                $('#join_id').focus()
                return;
            }
            if (!is_id(userid)) {
                $('#check_id').text("아이디 형식을 확인해 주세요. 영문과 숫자 사용 가능 5~20자 길이").removeClass("is-safe").addClass("is-danger")
                $('#join_id').focus()
                return;
            }
            $('#check_id').addClass('is-loading')

            $.ajax({
                type: "POST",
                url: "/api/membership",
                data: {userid_give: userid},
                success: function (response) {

                    if (response['exists']) {
                        $('#check_id').text('이미 존재하는 아이디입니다.').removeClass("is-safe").addClass("is-danger")
                        $('#join_id').focus()
                    } else {
                        $('#check_id').text('사용할 수 있는 아이디입니다.').removeClass("is-danger").addClass("is-success")
                    }
                    $('#check_id').removeClass('is-loading')
                }
            });
        }


    </script>
</head>
<body>
    <section class="section is-medium">
        <div class="join-title">
            <p class="title is-1 level-item has-text-centered">YOULINK :)</p>
        </div>

        <!--회원가입 부분-->
        <form class="box">
            <!--아이디 입력-->
            <div class="field">
                <label class="label">아이디</label>
                <div class="field has-addons">
                    <div class="control is-expanded">
                        <input class="input" type="text" id="join_id" placeholder="">
                    </div>
                    <div class="control">
                        <a class="button is-info">중복확인</a>
                    </div>
                </div>
                <p class="help">아이디는 2-10자의 영문과 숫자만 입력 가능합니다.</p>
            </div>
            <!--비밀번호 입력-->
            <div class="field">
                <label class="label">비밀번호</label>
                <div class="control">
                    <input class="input" type="password" id="join_pw" placeholder="" value="">
                </div>
                <p class="help">영문과 숫자 조합의 8-20자의 비밀번호를 설정해주세요. 특수문자(!@#$%^&*)도 사용 가능합니다.</p>

            </div>
            <!--비밀번호 확인-->
            <div class="field">
                <label class="label" onclick="check_duplicate()">비밀번호 확인</label>
                <div class="control">
                    <input class="input" type="password" id="join_pw2" placeholder="" value="">
                </div>
            </div>
            <!--닉네임 입력-->
            <div class="field">
                <label class="label">닉네임</label>
                <div class="field has-addons">
                    <div class="control is-expanded">
                    <input class="input" type="password" id="join_nickName" placeholder="" value="">
                </div>
                <div class="control">
                    <a class="button is-info" onclick="">중복확인</a>
                </div>
                </div>
                <p class="help">닉네임은 2-10자의 영문과 숫자만 입력 가능합니다.</p>

            </div>
            <div class="field is-grouped buttons">
                <div class="control">
                    <button class="button is-link" onclick="sign_up()">회원가입</button>
                </div>
                <div class="control">
                    <button class="button is-link is-light" onclick="window.location.href='/'">Cancel</button>
                </div>
            </div>
        </form>
    </section>

</body>
</html>